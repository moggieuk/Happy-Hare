[mmu]
happy_hare_version: 3.00

[mmu_machine]
num_gates: {param_num_gates}			# Number of selectable gates on MMU
mmu_vendor: {param_mmu_vendor}			# MMU family
mmu_version: {param_mmu_version}			# MMU hardware version number (add mod suffix documented above)

[tmc2209 stepper_mmu_gear]
uart_pin: mmu:MMU_GEAR_UART
uart_address: 0 			# Only for EASY-BRD
run_current: {param_gear_run_current}			# ERCF BOM NEMA14 motor
hold_current: {param_gear_hold_current}			# Recommend to be small if not using "touch" or move (TMC stallguard)
interpolate: True
sense_resistor: 0.110			# Usually 0.11, 0.15 for BTT TMC2226
stealthchop_threshold: 0		# Spreadcycle has more torque and better at speed
#
# Uncomment two lines below if you have TMC and want the ability to use filament "touch" homing with gear stepper
diag_pin: ^mmu:MMU_GEAR_DIAG		# Set to MCU pin connected to TMC DIAG pin for gear stepper
driver_SGTHRS: 60			# 255 is most sensitive value, 0 is least sensitive

[stepper_mmu_gear]
step_pin: mmu:MMU_GEAR_STEP
dir_pin: !mmu:MMU_GEAR_DIR
enable_pin: !mmu:MMU_GEAR_ENABLE
rotation_distance: 22.7316868		# Bondtech 5mm Drive Gears. Overriden by 'mmu_gear_rotation_distance' in mmu_vars.cfg
gear_ratio: {param_gear_gear_ratio}			# E.g. ERCF 80:20, Tradrack 50:17
microsteps: 16 				# Recommend 16. Increase only if you "step compress" issues when syncing
full_steps_per_rotation: 200		# 200 for 1.8 degree, 400 for 0.9 degree
#
# Uncomment the two lines below to enable filament "touch" homing option with gear motor
extra_endstop_pins: tmc2209_stepper_mmu_gear:virtual_endstop
extra_endstop_names: mmu_gear_touch

{cfg_gear_steppers}

{cfg_selector_stepper}

{cfg_selector_servo}

{cfg_encoder}

[mmu_sensors]
pre_gate_switch_pin_%: ^mmu:MMU_PRE_GATE_%

post_gear_switch_pin_%: ^mmu:MMU_POST_GEAR_%

gate_switch_pin: ^mmu:MMU_GATE_SENSOR

extruder_switch_pin: {pin_extruder_sensor}
toolhead_switch_pin: {pin_toolhead_sensor}

sync_feedback_tension_pin: {pin_sync_feedback_tension}
sync_feedback_compression_pin: {pin_sync_feedback_compression}

{cfg_leds}
